\documentclass[10pt,landscape,a4paper]{article}
\usepackage[english]{babel}
\usepackage[utf8]{inputenc}
\usepackage[plain]{algorithm}
\usepackage[noend]{algpseudocode}
\usepackage{tikz}
\usepackage{pgfplots}
\usepackage{palatino}
\usepackage{multicol}
\usepackage{blkarray}

\usepackage{calc}
\usepackage{ifthen}
\usepackage[landscape]{geometry}
\usepackage{graphicx}
\usepackage{amsmath, amssymb, amsthm}
\DeclareMathOperator*{\argmin}{argmin}
\DeclareMathOperator*{\argmax}{argmax}

\usepackage{physics}
\usepackage{latexsym, marvosym}
\usepackage{pifont}
\usepackage{lscape}
\usepackage{dsfont}
\usepackage{graphicx}
\usepackage{array}
\usepackage{booktabs}
\usepackage[bottom]{footmisc}
\usepackage{tikz}
\usetikzlibrary{shapes}
\usepackage{pdfpages}
\usepackage{wrapfig}
\usepackage{enumitem}
\setlist[description]{leftmargin=0pt}
\usepackage{xfrac}
\usepackage[pdftex,
            pdfauthor={Jose},
            pdftitle={Mathematical Methods for Quantitative Finance},
            pdfsubject={Cheat sheet for MITx 15.455x Mathematical Methods for Quantitative Finance},
            pdfkeywords={finance} {cheatsheet} {pdf} {cheat} {sheet} {formulas} {equations}
            ]{hyperref}
\usepackage[
            open,
            openlevel=2
            ]{bookmark}
\usepackage{relsize}
\usepackage{rotating}

% for monospace font https://tex.stackexchange.com/questions/50810/good-monospace-font-for-code-in-latex
\usepackage{inconsolata}


 \newcommand\independent{\protect\mathpalette{\protect\independenT}{\perp}}
    \def\independenT#1#2{\mathrel{\setbox0\hbox{$#1#2$}%
    \copy0\kern-\wd0\mkern4mu\box0}} 
            
\newcommand{\noin}{\noindent}    
\newcommand{\logit}{\textrm{logit}} 
%\newcommand{\var}{\textrm{Var}}
\newcommand{\cov}{\textrm{Cov}} 
\newcommand{\corr}{\textrm{Corr}} 
\newcommand{\N}{\mathcal{N}}
\newcommand{\Bern}{\textrm{Bern}}
\newcommand{\Bin}{\textrm{Bin}}
\newcommand{\Beta}{\textrm{Beta}}
\newcommand{\Gam}{\textrm{Gamma}}
\newcommand{\Expo}{\textrm{Expo}}
\newcommand{\Pois}{\textrm{Pois}}
\newcommand{\Unif}{\textrm{Unif}}
\newcommand{\Geom}{\textrm{Geom}}
\newcommand{\NBin}{\textrm{NBin}}
\newcommand{\Hypergeometric}{\textrm{HGeom}}
\newcommand{\HGeom}{\textrm{HGeom}}
\newcommand{\Mult}{\textrm{Mult}}

\geometry{top=.4in,left=.2in,right=.2in,bottom=.4in}

\pagestyle{empty}
\makeatletter
\renewcommand{\section}{\@startsection{section}{1}{0mm}%
                                {-1ex plus -.5ex minus -.2ex}%
                                {0.5ex plus .2ex}%x
                                {\normalfont\large\bfseries}}
\renewcommand{\subsection}{\@startsection{subsection}{2}{0mm}%
                                {-1explus -.5ex minus -.2ex}%
                                {0.5ex plus .2ex}%
                                {\normalfont\normalsize\bfseries}}
\renewcommand{\subsubsection}{\@startsection{subsubsection}{3}{0mm}%
                                {-1ex plus -.5ex minus -.2ex}%
                                {1ex plus .2ex}%
                                {\normalfont\small\bfseries}}
\makeatother

\setcounter{secnumdepth}{0}

\setlength{\parindent}{0pt}
\setlength{\parskip}{0pt plus 0ex}

% -----------------------------------------------------------------------

\usepackage{titlesec}

\titleformat{\section}
{\color{blue}\normalfont\normalsize\bfseries}
{\color{blue}\thesection}{0em}{}
\titleformat{\subsection}
{\color{violet}\normalfont\normalsize\bfseries}
{\color{violet}\thesection}{1em}{}
% Comment out the above 5 lines for black and white

\begin{document}

\raggedright
\footnotesize
\begin{multicols*}{3}

% multicol parameters
% These lengths are set only within the two main columns
%\setlength{\columnseprule}{0.25pt}
\setlength{\premulticols}{1pt}
\setlength{\postmulticols}{1pt}
\setlength{\multicolsep}{1pt}
\setlength{\columnsep}{1pt}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% TITLE
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{center}
    {\color{blue} \Large{\textbf{Mathematical Methods for Quantitative Finance}}} 
\end{center}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% ATTRIBUTIONS
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\scriptsize

Cheat sheet for MITx 15.455x Mathematical Methods for Quantitative Finance.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% BEGIN CHEATSHEET
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Week 1: Probability}\smallskip \hrule height 1pt \smallskip

\subsection{Random variables, distributions, and moments}

\begin{description}[topsep=0pt]
	\item[Moments of a distribution] ~
	\begin{itemize}[topsep=0pt]
		\item The \textbf{moments} of a distribution are the expectation of powers of the r.v.
		$ \mu_l = E[X^l] =  \begin{cases} \sum_k x_k^l p(x_k) \\  \int x^l p(x)dx \end{cases}$
		\item \textbf{Variance} : $\sigma^2 = \mathbb{E}[(X-\mu)^2] =\mathbb{E}[X^2]-\mathbb{E}[X]^2$
		\item \textbf{Skewness} - asymmetry parameter : $s = \frac{\mathbb{E}[(X-\mu)^3]}{\sigma^3} = \mathbb{E}\big[ \big(\frac{X-\mu}{\sigma} \big)^3\big]$
		\item \textbf{Kurtosis} - measure of tail "weights" :  $\kappa = \mathbb{E}\big[ \big(\frac{X-\mu}{\sigma} \big)^4\big] -3 $ 		
	\end{itemize}
\end{description}
 
\begin{description}[topsep=0pt]
	\item[Covariance and correlation] ~
\begin{itemize}[topsep=0pt]
	\item \textbf{covariance}: $\operatorname{Cov}(X,Y) \equiv \mathbb{E}[(X-\mu_x)(Y-mu_y)]=\mathbb{E}[XY]-\mu_x \mu_y$
	\item the \textbf{correlation} is proportional to the covariance: $\rho(X,Y) = \operatorname{Corr}(X,Y) \equiv \frac{\operatorname{Cov}(X,Y)}{\sqrt{\operatorname{Var}(X)\operatorname{Var}(Y)}} = \mathbb{E} \Big[ \Big(\frac{X-\mu_x}{\sigma_x}\Big)\Big(\frac{Y-\mu_y}{\sigma_y} \Big) \Big] $		
\end{itemize}
\end{description}

\begin{description}[topsep=0pt]
	\item[Common distributions] ~
	\begin{itemize}[topsep=0pt]
		\item \textbf{Uniform distribution}: 
			$
			p(x) = \begin{cases}
				1, x \in [0,1] \\
				0, \text{otherwise}
			\end{cases}$ 
			, $\operatorname{Prob}(a<X<b)=b-a$
			$\mu = \int_{\infty}^{\infty}x p(x) \text{d}x= \int_{0}^{1} x \text{d}x = \frac{1}{2}$, 
			$\sigma^2 = \int_{\infty}^{\infty}(x-\frac{1}{2})^2 \text{d}x= \frac{1}{12} $	
			$u_l= \int_{0}^{1}x_l dx= \frac{1}{l}$ 
		\item \textbf{Binomial distribution}:
			$f(x;n,p) = {n \choose k} p^k q^{n-k} = \frac{n!}{k!(n-k)!} p^k q^{n-k} $, 
			$\mu = np$, $\sigma^2 = npq$
		\item \textbf{Gaussian distribution}:
			$p(x) - \frac{1}{\sqrt{2 \pi \sigma ^2}} e^{- \frac{1}{2} \big(\frac{x-\mu}{\sigma} \big)^2}$ ,
			$ \Phi(x) = Prob(Z<x) = \frac{1}{\sqrt{2 \pi}}\int_{-\infty}^{x} e^{-z^2/2} dz   $ \\
			Moments: $\begin{tabular}{ |c|l|c| } 
				\hline
				Order & Non-central moment & Central moment \\ 
				\hline 
				1 & $\mu$ & 0 \\ 
			    2 & $\mu^2+\sigma^2$ & $\sigma^2$ \\ 
				3 & $\mu^3+3\mu \sigma^2$ & 0 \\ 
				4 & $\mu^4+6\mu^2 \sigma^2 + 3\sigma^4$ & $3 \sigma^4$ \\ 

				\hline
			\end{tabular}$
		\item \textbf{Lognormal distribution}: $X=\operatorname{log}Y$ , $x=\operatorname{log}y$, then $g(y)=\frac{p(x)}{|\text{d}y/\text{d}x|} = \frac{1}{y \sqrt{2 \pi \sigma^2}} e^{- (\operatorname{log}y -\mu)^2/(2 \sigma^2) }$
		\item \textbf{Poisson distribution}: $p(k;\lambda) = \frac{e^{-\lambda} \lambda^k}{k!}$. $\mu = \sigma^2 = \lambda$ . \\ 
		   Probability of $k$ "arrivals" during interval $t$: $p(k;\lambda) = \frac{e^{-\lambda t} (\lambda t)^k}{k!}$ \\
		   
			
	\end{itemize}
\end{description}

\section{Week 2: Stochastic Processes}\smallskip \hrule height 1pt \smallskip


\subsection{The Random Walk}

\begin{description}[topsep=0pt]
	\item[Random walk model] ~
	\begin{itemize}[topsep=0pt]
		\item $S_T = z_1 + z_2 + \cdots + z_T $ . Each increment is a random IID variable. $\mathbb{E}[z_t]=0$, $\mathbb{E}[z_t^2]=1$, $\mathbb{E}[z_t z_{t'}]=0$ if $t\neq t'$. $\operatorname{Var}(S_T)=T$
		\item \textbf{Generalized random walk model}: $r_t = \sigma z_t + \mu$. $\mathbb{E}[r_t] = \mu$, $\mathbb{E}[(r_t-\mu)^2]=\sigma^2$.  $X_T \equiv \sum_{t=1}^{T}r_t$, $\mathbb{E}[X_T] = T\mu$, $\operatorname{VaR}(X_T) = T \sigma^2$.
	\end{itemize}
\end{description}


\subsection{Time series models}

\begin{description}[topsep=0pt]
	\item[Time series models] ~
	\begin{itemize}[topsep=0pt]
		\item a ts process is \textbf{stationary} if the join distribution of all of its values is invariant under time translation.
		\item a ts is \textbf{weakly stationary} if the first and second moments are invariant.
		\item MA(1): $r_t = \mu + \sigma z_t + \phi z_{t-1}$ 
		\item AR(p): $R_t = c_0+c_1 R_{t-1} + \dots + c_p R_{t-p} + \sigma z_t, z_t \sim IID(0,1) $
		\item ARMA(p,q): 
		$R_t = c_0 + c_1 R_{t-1} + \dots + c_p R_{t-p} + \sigma z_t + \phi_1 z_{t-1} + \dots + \phi_q z_{t-q}$
		\item AR(1) used for \textbf{mean reversion}:  $R_t = c_0 + c_1 R_{t-1} + \sigma z_t$ , $E[R_t]=\frac{c_0}{1-c_1}$, for convenience: $\mu = \frac{c_0}{1-c_1}$, $\lambda = -c_1$. Then: $R_t-\mu = -\lambda (R_t-\mu) + \sigma z_t $, $|\lambda | <1$. 
		$Var[R_t] = \gamma_0 = \frac{\sigma^2}{1-\lambda^2}$ . \\
		Lag-$k$ autocovariance coefficient: $\gamma_k=(-\lambda)^k \gamma_0 = \frac{(-\lambda)^k}{1-\lambda^2} \sigma^2$
	\end{itemize}
\end{description}

\section{Week 3: Time Series Models}\smallskip \hrule height 1pt \smallskip


\begin{description}[topsep=0pt]
	\item[Gambler's Ruin] ~
	\begin{itemize}[topsep=0pt]
		\item Repeated set of gambles with probability of success $p$ and of failure $q=1-p$
		\item initial capital is $x>0$, total capital $a$. Stop when winning $a$ or \textbf{ruin} as $x=0$.
		\item $Q_x$ is \textbf{probability of ruin} starting from capital $x$: $Q_x=pQ_{x+1} + p Q_{x-1}$.
		\item $Q_x = \frac{(q/p)^a-(q/p)^x}{(q/p)^a-1}$, if $p=q=1/2$, then:  $Q_x=1-\frac{x}{a}$
		
	\end{itemize}	
\end{description}

\section{Week 4: Continuous-Time Finance}\smallskip \hrule height 1pt \smallskip

\subsection{It\^{o} processes and It\^{o}'s lemma }

\begin{description}[topsep=0pt]
	\item[It\^{o}'s lemma] ~
	\begin{itemize}[topsep=0pt]
		\item It\^{o} process: $\text{d}X = a \text{d}t+b \text{d}B$\
		\item $\text{d}F=\Big( \frac{\partial F}{\partial t}\text{d}t + \frac{\partial F}{\partial X} \text{d}X + \frac{1}{2} \frac{\partial^2 F}{\partial X^2} (\text{d}X)^2 + \cdots \Big) = \Big( \frac{\partial F}{\partial t}\text{d}t + \frac{\partial F}{\partial X} \text{d}X + \frac{1}{2} \frac{\partial^2 F}{\partial X^2} [b^2 \text{d}t] \Big) = \Big[ \frac{\partial F}{\partial t}\text{d}t + \frac{b^2}{2} \frac{\partial^2 F}{\partial X^2} \Big] \text{d}t + \Big[\frac{\partial F}{\partial X}\Big]  [ a \text{d}t+b \text{d}B]$ \\
		$\text{d}F = \Big[ \frac{\partial F}{\partial t} +a \frac{\partial F}{\partial X} + \frac{b^2}{2} \frac{\partial^2 F}{\partial X^2} \Big] \text{d}t + b \frac{\partial F}{\partial X} \text{d}B  $
		
		\item Heuristics: expand and replace $(\text{d}B_t)^2 \rightarrow \text{d} t $,  $(\text{d}X_t)^2 \rightarrow b^2 \text{d}t$
	\end{itemize}
\end{description}

\begin{description}[topsep=0pt]
	\item[It\^{o} processes] ~
	\begin{itemize}[topsep=0pt]
		\item \textbf{Brownian motion with drift}: $\text{d}S_t = \mu \text{d}t+b \text{d}B_t$ \\
		   $S_T = S_0 + \mu T + \sigma (B_T-B_0)$ 
		\item \textbf{GBM with drift}:  $\text{d}S_t = \mu S_t \text{d}t+b S_t \text{d}B_t$ \\
		   $\text{d}(log S_t)=(\mu-\frac{\sigma^2}{2}) \text{d}t + \sigma \text{d}B_t$ ,  $S_T = S_0 e^{(\mu -\frac{\sigma^2}{2})T + \sigma (B_T-B_0)}  $
		\item \textbf{Ornstein–Uhlenbeck process}:  $\text{d}S_t = \lambda (\bar{S} -S_t) \text{d}t + \sigma \text{d}B_t$
		\item \textbf{Cox–Ingersoll–Ross process}:  $ \text{d} \rho_t = \lambda ( \bar{\rho} - \rho_t) \text{d}t + \sigma \sqrt{\rho_t} \text{d} B_t$ \\
		   Let $F=\sqrt{\rho}$ , $\frac{\partial F}{\partial \rho} = \frac{1}{2\sqrt{\rho}}$, $\frac{\partial^2F}{\partial \rho^2} = - \frac{1}{4} \rho ^{-\frac{3}{2}}$ \\
		   $ \text{d}F = \Big( \frac{4 \lambda \bar{\rho} - \sigma^2}{8F} - \frac{1}{2} \lambda F \Big) \text{d}t + \frac{1}{2} \sigma \text{d}B_t$
		
		
	\end{itemize}
\end{description}

\subsection{From SDE to PDE: The Black-Scholes equation}

\begin{description}[topsep=0pt]
	\item[Black-Scholes equation] ~
	\begin{itemize}[topsep=0pt]
		\item It\^{o} process: $\text{d}X = a \text{d}t+b \text{d}B$\
		\item $\text{d}F=\Big( \frac{\partial F}{\partial t}\text{d}t + \frac{\partial F}{\partial X} \text{d}X + \frac{1}{2} \frac{\partial^2 F}{\partial X^2} (\text{d}X)^2 + \cdots \Big) = \Big( \frac{\partial F}{\partial t}\text{d}t + \frac{\partial F}{\partial X} \text{d}X + \frac{1}{2} \frac{\partial^2 F}{\partial X^2} [b^2 \text{d}t] \Big) = \Big[ \frac{\partial F}{\partial t}\text{d}t + \frac{b^2}{2} \frac{\partial^2 F}{\partial X^2} \Big] \text{d}t + \Big[\frac{\partial F}{\partial X}\Big]  [ a \text{d}t+b \text{d}B]$ \\
		$\text{d}F = \Big[ \frac{\partial F}{\partial t} +a \frac{\partial F}{\partial X} + \frac{b^2}{2} \frac{\partial^2 F}{\partial X^2} \Big] \text{d}t + b \frac{\partial F}{\partial X} \text{d}B  $
		
		\item Heuristics: expand and replace $(\text{d}B_t)^2 \rightarrow \text{d} t $,  $(\text{d}X_t)^2 \rightarrow b^2 \text{d}t$
	\end{itemize}
\end{description}


\section{Week 5: It\^{o} Calculus}\smallskip \hrule height 1pt \smallskip

\subsection{Black-Scholes equation}

\begin{description}[topsep=0pt]
	\item[Summary of some key formulas] ~
	\begin{itemize}[topsep=0pt]
	 \item It\^{o} process: $\text{d}X = a \text{d}t+b \text{d}B$\
     \item It\^{o} formula: \begin{align*}
     	\text{d}F &= \frac{\partial F}{\partial t} \text{d}t + \frac{\partial^2 F}{\partial X^2} \text{d}X + \frac{b^2}{2} \frac{\partial F}{\partial X} \text{d}t \\
 	         	&=   \Bigg( \frac{\partial F}{\partial t} +a \frac{\partial F}{\partial X} + \frac{b^2}{2} \frac{\partial^2 F}{\partial X^2} \Bigg) \text{d}t + b \frac{\partial F}{\partial X} \text{d}B   
 \end{align*}
      
      \item Stock price: $\text{d}S = \mu S \text{d}t + \sigma \text{d}B \implies \text{d}(\text{log } S) = \Big(\mu - \frac{\sigma^2}{2} \Big) \text{d}t + \sigma \text{d}B$
      \item Black-Scholes:  $\Delta = \partial V / \partial S$ , $\text{d}\pi=r \pi \text{d}t$  ,
   
      $$ \frac{\partial V}{\partial t} + \frac{\sigma^2 S^2}{2} \frac{\partial ^2 V}{\partial S^2} + r S \frac{\partial V}{\partial S} -rV =0 $$ 
	\end{itemize}
\end{description}



\subsection{Recitation 5}

\begin{description}[topsep=0pt]
	\item[Expectations from Brownian integrals] ~
	\begin{itemize}[topsep=0pt]
		\item $ dB \sim N(0,dt) $
		\item $  \int_{0}^{t} dB = B_t - B_0 \sim N(0,t ) $
		\item $E[f(B_t-B_0)] = E[f(\sqrt{t} z)] = \frac{1}{\sqrt{2\pi}} \int e^{-z^2/2}f(\sqrt{t}z) dz$ 
		\item Example  $E[f(B_t-B_0)] = E[(B_t-B_0)^4] = E[(\sqrt{t} z)^4] = t^2 E[z^4] = 3t^2 $ \\
		
		We can pull out $\sqrt{t}$,which is nonstochastic to get $t^2 E[z^4]$
		, $E[z^4]$ is a well-known Gaussian integal that we use in the kurtosis=3.
		\item Useful formula:  $E[e^{\alpha z + \beta}]  = e^{\alpha^2/2 + \beta}$
	\end{itemize}
\end{description}

\begin{description}[topsep=0pt]
	\item[Solutions to the diffusion equation] ~
	\begin{itemize}[topsep=0pt]
		\item \textbf{diffusion equation}: $ \frac{\partial p}{\partial t} - \frac{1}{2} \frac{\partial ^2 p}{\partial z^2} = 0 $
		\item special solution $p(z,0)=f(z)$ then the general solution is: $ p(z,t) = \int p_0(z-w,t)f(w)dw $ , where 
		$ p_0 = \frac{1}{\sqrt{2 \pi t}} e^{-\frac{z^2}{2t}} $
		\item  $ \text{let } u=\frac{w-z}{\sqrt{t}}  \implies  du=\frac{dw}{\sqrt{t}} $
		$ \implies  w=u \sqrt{t} + z $.  Now general solution can be computed as expectation of standard Gaussian: $p(z,t) = \mathbb{E}[f(\sqrt{t}u+z)]$ , where $u \sim N(0,1) $
		\item \textbf{example}: $p(z,0) = z^2 $, $ f(z) = z^2 $, find $ p(z,t) $ \\
		$p(z,t) = \int p_0(z-w,t)f(w)dw = \int  \frac{1}{\sqrt{2 \pi t}} e^{-\frac{(z-w)^2}{2t}} w^2 dw =  \frac{1}{\sqrt{2 \pi}} \int_{-\infty}^{\infty}  e^{-\frac{u^2}{2}} (u \sqrt{t} + z)^2 du =  \mathbb{E} [f(u \sqrt{t} + z)] =  \mathbb{E}[u^2t + 2u \sqrt{t}z + z^2] =  z^2+t $
		
	\end{itemize}
\end{description}

\section{Week 6: Continuous-Time Finance}\smallskip \hrule height 1pt \smallskip

\subsection{It\^{o} processes in higher dimensions}

\begin{description}[topsep=0pt]
	\item[It\^{o}'s lemma: multiple stochastic variables] ~
	\begin{itemize}[topsep=0pt]
		\item  $ \text{d}X_i = a_i(t,X_1,X_2,...) \text{d}t+  b_i(t,X_1,X_2,...)\text{d} B_i $ \\
		 $\text{d} F = \frac{\partial F}{\partial t} \text{d}t + \sum \frac{\partial F}{\partial X_i} \text{d}X_i + \frac{1}{2} \sum \rho_{ij} b_i b_j \frac{\partial ^2 F}{\partial X_i X_j} \text{d}t$ 
		 \item Heuristics "rule of thum" for correlated Brownian motions : \\
		    $ (\text{d}B_i)^2 \rightarrow \text{d}t $ , 
		    $ (\text{d}B_i)(\text{d}B_j) \rightarrow \rho_{ij} \text{d}t$ ,\\ 
		    $ (\text{d}X_i )^2 \rightarrow b^2_i \text{d}t $ ,
		    $ (\text{d}X_i)(\text{d}X_j) \rightarrow \rho_{ij} b_i b_j \text{d} t $ 
		\item two stochastic variables case:  $\text{d}X_1 = a_1 \text{d}t + b_1 \text{d}B_1 $, $\text{d}X_2   = a_2 \text{d}t + b_2 \text{d}B_2 $ \\
			 $\text{d}F =  \frac{\partial F}{\partial t} \text{d}t + \frac{\partial F}{\partial X_1} \text{d}X_1+  \frac{\partial F}{\partial X_2} \text{d}X_2 + \Big( \frac{b_1^2}{2}  \frac{\partial^2 F}{\partial X_1^2} + \frac{b_2^2}{2}  \frac{\partial^2 F}{\partial X_2^2} + b_1 b_2 \rho \frac{\partial^2 F}{\partial X_1 \partial X_2} \Big) \text{d}t $
		 \item With two random variables, Ito's formula for $F(t, X, Y)$ is:
			$dF = \frac{\partial F}{\partial t} dt + \frac{\partial F}{\partial X} dX + \frac{\partial F}{\partial Y} dY + \frac{1}{2} \frac{\partial^2 F}{\partial X^2} (dX)^2  +  \frac{1}{2} \frac{\partial^2 F}{\partial Y^2} (dY)^2 + \frac{\partial^2 F}{\partial X \partial Y} (dX)(dY)
			$
		 \item example: $F=X1X2 \implies \text{d}F = X1 \text{d} X_2 + X_2 \text{d} X_1 + \rho b_1 b_2 \text{d} t $ \\
		 since $(\text{d}X_i)(\text{d}X_j) \rightarrow \rho_{ij} b_i b_j \text{d} t \implies \text{d}F = X1 \text{d} X_2 + X_2 \text{d} X_1 + \text{d}X_1 \text{d}X_2 $

	\end{itemize}
\end{description}


\subsection{Measures, martingales, and Monte Carlo}

\begin{description}[topsep=0pt]
	\item[Risk-neutral pricing] ~
	\begin{itemize}[topsep=0pt]
		\item  Under measure $Q$, expected return on risky assets equals risk-free rate: $\mathbb{E}_t^Q=\big[ \frac{\text{d}S_t}{S_t}\big] = r \text{d}t$
		\item Heuristic: replace drift with risk-free rate to get risk-neutral process: $\mu \rightarrow r$
		\item All (no-arbitrage) traded assets have discounted price process that are
		martingales:  $e^{-rt}X_t = \mathbb{E}_t^Q[e^{-rT X_T}]$.  Example, call option: $C_t = e^{r(T-t)} \mathbb{E}_t^Q[\operatorname{max}(S_T-K,0)]$ 
		\item Monte Carlo implementation: generate ensemble of equiprobable price
		paths using \textbf{risk-neutral} drift and volatility parameters, compute terminal
		payoffs, and take average of their discounted present value.
		\item \textbf{example}: Let $S$  be the value of a stock that evolves according to GBM. A "cubic contract" has a payoff at expiration of $V_T=(S_T)^3$ . What is the value  of the contract at $V_0$ at $t=0$ :  $V_t = e^{-r(T-t)}\mathbb{E}^Q[V_T]$ setting $t=0$. Then: 
		
			
			$V_T = S_T^3 = \left[S_0 e^{(r-\sigma^2/2)T + \sigma{\sqrt T}Z}\right]^3$
			$V_T= \left[ S_0^3 e^{3(r-\sigma^2/2)T} \right] e^{3\sigma{\sqrt T}Z}, \quad Z \sim{\cal N}(0,1)$ \\
			$V_t = e^{-r(T-t)}\mathbb{E}^Q[V_T]$
			$= \left[ S_0^3 e^{-rT}e^{3(r-\sigma^2/2)T} \right] \mathbb{E}^Q\left[e^{ 3\sigma{\sqrt T}Z}\right]$ \\
			$V_t= \left[S_0^3 e^{2rT} e^{-3\sigma^2T/2} \right] e^{9\sigma^2 T/2}$ 
			$ S_0^3 e^{2rT+3\sigma^2T}$ .
	
	\end{itemize}
\end{description}


\begin{description}[topsep=0pt]
	\item[Bond pricing] ~
	\begin{itemize}[topsep=0pt]
		\item  \textbf{one-factor Vasicek model}:  The short rate  evolves according to the Ornstein-Uhlenbeck process $\text{d} y_t = \alpha(\bar{y} - y_t) \text{d}t + \sigma \text{d}B,
		$. The bond-pricing equation takes the form $\frac{\partial{V}}{\partial{t}}+\frac{\sigma^2}{2}\frac{\partial^2V}{\partial{y^2}}-yV+\alpha(\bar{y}-y)\frac{\partial{V}}{\partial{y}} = 0.
		$.  At the boundary condition $V=1$ and $t=T$ since the zero-coupon bonds returns $\$1$ at maturity.
		Find $V(t,y)$ as a funciton of $t$, $y$, and the maturity date $T$, and the constant parameters $\alpha$, $\sigma$ and $\bar{y}$. Ansatz $V=e^{f(t) - y g(t)}$
	
		
		\item Then rearranging : $\left(\alpha g -1-\frac{\text{d}g}{\text{d}t}\right) \cdot y + \left(\frac{\text{d}f}{\text{d}t}+\frac{1}{2}\cdot \sigma^2g^2-\alpha\bar{y}g\right).
		$
		\item $0= \alpha g -1-\frac{\text{d}g}{\text{d}t} \hspace{5mm} \text{and} \hspace{5mm} 0 = \frac{\text{d}f}{\text{d}t}+\frac{1}{2}\cdot \sigma^2g^2-\alpha\bar{y}g
		$  which is equivalent to: $\frac{\text{d}g}{\text{d}t}= \alpha g -1 \hspace{5mm} \text{and} \hspace{5mm} \frac{\text{d}f}{\text{d}t} = \alpha\bar{y}g - \frac{1}{2}\cdot \sigma^2g^2.
		$
		\item We impose the boundary conditions $f(T)=g(T)=0$:  
		
			$f(t) =  \bar{y} \left[-(T-t) + \frac{1}{\alpha}\left(1-e^{-\alpha(T-t)}\right) \right] 
			+ \frac{\sigma^2}{4\alpha^3}\left[ 2\alpha(T-t) - 4\left(1- e^{-\alpha(T-t)}\right) +\left(1 - e^{-2\alpha(T-t)}\right)\right]$
		
	
		
	\end{itemize}
\end{description}


\section{Week 7: Linear algebra of asset pricing}\smallskip \hrule height 1pt \smallskip


\begin{description}[topsep=0pt]
	\item[Linear algebra of asset pricing] ~	
	\begin{itemize}[topsep=0pt]
		\item  \textbf{The payoff matrix} $A$ is a matrix $s \cross n$ with $s$ states of the world and $n$ different securities.
		\item A \textbf{portfolio} $\vec{\mathbf{x}}$ is represented as a vector of quantities held for each security.
		\item The \textbf{portfolio payoff} is determined by action on the portfolio vector with the payoff matrix: $A\vec{\mathbf{x}}$
		\item A \textbf{complete market}  is one in which every payoff can be generated by some portfolio, $\operatorname{rank}(A) = s$. If $n > s$, select a complete basis and drop $n-s$ redundant securities
		\item An \textbf{incomplete market} s one in which some payoffs cannot be generated
		by any portfolio. $\operatorname{rank}()A) < s$.
		\item Present \textbf{prices} can be represented by a vector $\vec{\mathbf{S}}$ dimension $n$.
		\item Market value of a portfolio is sum of (price) x (quantity): $MV = \sum_{i=1}^{n}S_i x_i = (S_1 \space S_2 \space \cdots) \begin{pmatrix} x_1 \\ x_2 \\ \vdots \end{pmatrix} = \vec{\mathbf{S}}^\top \vec{\mathbf{x}}$
		\item \textbf{Type I arbitrage}: Pay nothing now (i.e., negative or zero cost), $\vec{\mathbf{S}}^\top \vec{\mathbf{x}} \leq 0$. Receive only non-negative payoffs later: $A \vec{\bf x } \geq =0$ and at least one payoff $>0$.
		\item \textbf{Type II arbitrage} : There are redundant assets and non-trivial solutions to $A \vec{\bf x } =0$. There is arbitrage if the portfolio has a non-zero price, $\vec{\mathbf{S}}^\top \vec{\mathbf{x}} \neq 0$
		\item Portfolios with the special property that they have \textbf{unit} payoff in a single
		state are called Arrow-Debreu (AD) securities.
		\item In terms of a general payoff matrix, an elementary AD security can be
		replicated if there is a portfolio satisfying $A \vec{\bf x } = \vec{\bf{e}_j} = \begin{pmatrix}
			0 & 0 & \cdots &1 &  \cdots & 0 
		\end{pmatrix} ^\top$.  $\vec{\bf x } = A^{-1} \vec{\bf{e}_j}$ is a portfolio with unit payoff. The payoff matrix of a set of AD securities in the complete market is the identity matrix $I$.
		\item The prices of AD securities are called \textbf{state prices}: $\psi = (\psi_1 \space \cdots \space \psi_s )$
		\item The price of any security with payoff $\vec{\bf{b}}$ is $\vec{\bf{\psi}}^\top \vec{\bf{b}}$.  Intuition: we can think of  $\vec{\bf{b}}$ as a portfolio of AD securities.
		
		\item \textbf{Arbitrage theorem} Consider a market with $n$ securities, $s$ states of the world, payoff matrix $A \in \mathbb{R}^{s \cross n} \text{, } A: \mathbb{R}^n \rightarrow \mathbb{R}^s$.  There is no arbitrage if and only if there exists a \textbf{strictly positive} state-price
		vector $\vec{\bf{\psi}}$ \textbf{consistent with} the security-price vector, $\vec{\bf{\psi}} \in \mathbb{R}^s \text{, } \vec{\mathbf{S}} \in \mathbb{R}^n \text{, } \vec{\mathbf{S}}=A^\top \vec{\bf{\psi}}$ . 	 For \textbf{incomplete markets}, there
		can be (infinitely) multiple solutions $\vec{\bf{\psi}}$.  If there is \textbf{at least one solution} where $\vec{\bf{\psi}} > 0$, then no arbitrage. If \textbf{every solution} has $\vec{\bf{\psi}} \leq 0$, then there is arbitrage.
		\item If $A$ is not invertible ($s<n$), $A^\top$ has \textbf{pseudo-inverse} $M$: $M \equiv (A A^\top) ^{-1}\ A$, check that $M A ^\top=I$, $ I \in \mathbb{R}^s $
		\item \textbf{Arbitrage pricing theorem} Given payoffs $A$, prices $\vec{\mathbf{S}}$, target asset with payoff $\vec{\bf{b}}$:  Find all $\vec{\bf{\psi}}>0$ such that $A^\top \vec{\bf{\psi}}=\vec{\mathbf{S}}$.  No solution $\implies$ arbitrage. 1 solution $\implies$ complete market. Multiple solution $\implies$ incomplete market.
	
		
	\end{itemize}
\end{description}



\section{Week 8: Optimization}\smallskip \hrule height 1pt \smallskip

\subsection{Portfolio Optimization}

\textbf{Portfolio risk} :  $\sigma_p^2 = \vec{\mathbf{w}}^{\top} C \vec{\mathbf{w}} = \sum w_i^2 \sigma_i^2 + 2 \sum_{i<j}w_i w_j \sigma_i \sigma_j \rho_{ij}$ \\ $\vec{\bf{w}} = \left(w_1 \hspace{2mm} w_2 \hspace{2mm} ... \hspace{2mm} w_n\right)^\top$

\begin{description}[topsep=0pt]
	\item[Portfolio optimization with budget] ~	
	\begin{itemize}[topsep=0pt]
		\item  
		$\mathcal{L}(\vec{\mathbf{w}}, \ell) = \frac{1}{2} \vec{\mathbf{w}}^{\top} C \vec{\mathbf{w}} + \ell (1 - \vec{\iota}^\top \vec{\mathbf{w}}^\top ) $ 
		\item Vary the weights: $\frac{\partial{\mathcal{L}}}{\partial{w_i}} = \left(\sum_{j \in [n]}{C_{ij}w_j}\right) - \ell\iota_i = 0$
		\item Solve for the weights by inverting matrix: 
		 $C\vec{\bf{w}} - \ell \vec{\iota} =0 \implies \vec{\bf{w}} = \ell  C^{-1} \vec{\iota} $
		\item Solve Lagrande multiplier : $ \vec{\iota}^\top \vec{\bf{w}} = 1 =\ell ( \vec{\iota}^\top C^{-1} \vec{\iota} ) \implies \ell = \frac{1}{ \vec{\iota}^\top C^{-1} \vec{\iota}} $  
		\item Solution: $\vec{\bf{w}}_{min} = \ell  C^{-1} \vec{\iota} = \frac{C^{-1} \vec{\iota}}{\vec{\iota}^\top C^{-1} \vec{\iota}}$ , $\hspace{2mm}$
		   $\sigma^2_{min} = \ell = \frac{1}{ \vec{\iota}^\top C^{-1} \vec{\iota}} $
		
		
	\end{itemize}
\end{description}

\begin{description}[topsep=0pt]
	\item[Portfolio optimization with budget and return constraint] ~ 
	 generalized to $\sum_i {w_i} = w_p$ 
	\begin{itemize}[topsep=0pt]
		\item  
		 $\mathcal{L}(\vec{\mathbf{w}}, \ell, m) = \frac{1}{2} \vec{\mathbf{w}}^{\top} C \vec{\mathbf{w}} + \ell (w_p - \vec{\iota}^\top\vec{\mathbf{w}} ) + m(\mu_p - \vec{\mu}^\top \vec{\mathbf{w}} )$ 
		 \item Vary the weights: 
		 $\frac{\partial{\mathcal{L}}}{\partial{w_i}} = \left(\sum_{j \in [n]}{C_{ij}w_j}\right) - \ell\iota_i-m\mu_i $
		 \item Solve for the weights:   $C\vec{\bf{w}} - \ell \vec{\iota} - m \vec{\mu} = {\bf{0}}  \implies $ 
		 $\vec{\bf w}=C^{-1}(l\vec{\iota}+m \vec{\mu})$
		 \item Solve for Langrange multipliers with constraints:  $ \vec{\iota}^\top\vec{\mathbf{w}} =w_p$ and  $\vec{\mu}^\top \vec{\mathbf{w}}=\mu_p$ 
		 $ 	w_p = \vec{\iota}^\top \vec{\mathbf{w}} = \ell(\vec{\iota}^{\top} C^{-1} \vec{\iota}) + m (\vec{\mu}^{\top} C^{-1} \vec{\iota}) $ \\
		 $ \mu_p = \vec{\vec{\mu}}^\top \vec{\mathbf{w}} = \ell (\vec{\mu}^{\top} C^{-1} \vec{\iota}) + m (\vec{\mu}^{\top} C^{-1} \vec{\mu})$ \\as
		 as matrix equation: $\begin{pmatrix} w_p \\ \mu_p \end{pmatrix} = M\begin{pmatrix} \ell \\ m \end{pmatrix}$ 
		 , where : $  M = \begin{pmatrix} a & b \\ b & c \end{pmatrix} $ \\
		 $a \equiv \vec{\iota}^{\top} C^{-1} \vec{\iota} $,  $b \equiv \vec{\mu}^{\top} C^{-1} \vec{\iota}$,  $c \equiv \vec{\mu}^{\top} C^{-1} \vec{\mu}$.
		 \item Solve for Langrange multiplier by inverting $M$: $\begin{pmatrix} \ell \\ m  \end{pmatrix} = M^{-1}\begin{pmatrix} w_p \\ \mu_p\end{pmatrix}$ \\
		 $M^{-1} = \frac{1}{ac-b^2}\begin{pmatrix} c & -b \\ -b & a \end{pmatrix}$, $\ell = \frac{cw_p-b\mu_p}{ac-b^2} \hspace{2mm} \text{and} \hspace{2mm} m = \frac{-bw_p+a\mu_p}{ac-b^2} .$
		 
		 \item Solution : 
		 	$\sigma^2_p  = \begin{pmatrix} \ell & m \end{pmatrix} M \begin{pmatrix} \ell \\ m \end{pmatrix} $ 
		 	$ = \left(\frac{cw_p-b\mu_p}{ac-b^2} \hspace{5mm} \frac{-bw_p+a\mu_p}{ac-b^2}\right) \begin{pmatrix} w_p \\ \mu_p \end{pmatrix}$ \\
		 	$ = \frac{1}{ac - b^2} \cdot (a \mu_p^2 - 2b w_p \mu_p + c w_p^2)$.
		

	\end{itemize}
\end{description}

\section{Useful formulas}\smallskip \hrule height 1pt \smallskip

$\operatorname{Cov}(aX+bY,Z) = a \operatorname{Cov}(X,Z)+b \operatorname{Cov}(Y,Z) $ \\
$\operatorname{Var}(aX+bY)=a^2\operatorname{Var}(X)+b^2\operatorname{Var}(Y)+2ab\, \operatorname{Cov}(X,Y)$
$\operatorname{Var}(aX-bY)=a^2\operatorname{Var}(X)+b^2\operatorname{Var}(Y)-2ab\, \operatorname{Cov}(X,Y)$
$\begin{pmatrix} a & b \\ c & d \end{pmatrix}^{-1} = \frac{1}{ad-bc}\begin{pmatrix} d & -b \\ -c & a \end{pmatrix}$


\newpage

\section{Recommended Resources} \smallskip \hrule height 1pt \smallskip

\bigskip

\begin{itemize}
\item MITx 15.455x 
MITx 15.455x
Mathematical Methods for Quantitative Finance [Lecture Slides] (\url{https://learning.edx.org/course/course-v1:MITx+15.455x+3T2020/home})

\item Tsay, Analysis of Financial Time Series (3e), Wiley. (Tsay)
\item Capinski and Zastawniak, Mathematics for Finance, Springer. (CZ)
\item Olver, Introduction to Partial Differential Equations (2016), Springer. (Olver)
\item Campbell, Lo, and MacKinlay, Econometrics of Financial Markets (1997), Princeton. (CLM)
\item Lang, Introduction to Linear Algebra (2e), Springer (Lang)
\item Axler, Linear Algebra Done Right (3e), Springer (Axler)
\item LaTeX File (\texttt{\href{https://github.com/j053g/cheatsheets/blob/main/15.455x/15.455x_math_methods_for_quant_finance.tex}{github.com/j053g/cheatsheets/15.455x}})
\end{itemize}

\begin{center}
	\emph{Last Updated \today}
\end{center}

\end{multicols*}



\end{document}
